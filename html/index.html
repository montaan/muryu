<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>zogen</title>
    <link rel="stylesheet" href="style.css"/>
    <script src="rototype.js"></script>
    <script src="portal.js"></script>
    <script>
      window.addEventListener("load",function(){
        $('zogen').style.width = window.innerWidth - parseInt($('zogen').computedStyle().left) + 'px'
        $('zogen').style.height = window.innerHeight - parseInt($('zogen').computedStyle().top) + 'px'
        var config = {
          container: $('zogen'),
          currentLocation : $('currentLocationLink'),
          tileURL : '/tile/',
          tileInfoURL : '/tile_info/',
          itemInfoURL : '/items/', itemInfoSuffix : '/json'
        }
        var xyz = document.location.hash.split(/[xyz]/)
        if (xyz[1] && xyz[1].match(/^[-+]?[0-9]+$/)) config.x = parseInt(xyz[1])
        if (xyz[2] && xyz[2].match(/^[-+]?[0-9]+$/)) config.y = parseInt(xyz[2])
        if (xyz[3] && xyz[3].match(/^[0-9]+$/)) config.zoom = parseInt(xyz[3])
        var z = window.zogen = new Portal(config)
        window.onkeypress = function(e){ z.keyHandler(e) }
        window.onresize = function(){
          z.container.style.width = window.innerWidth - parseInt(z.container.computedStyle().left) + 'px'
          z.container.style.height = window.innerHeight - parseInt(z.container.computedStyle().top) + 'px'
          z.updateTiles()
        }
      },false)

      function toggleCSSDisplay(selector) {
        var s = $S(selector)
        var d = s.style.display
        if (d && d == 'none') {
          s.style.display = 'block'
        } else {
          s.style.display = 'none'
        }
      }
    </script>
  </head>

  <body>
    <div id="currentLocation">
      <a id="currentLocationLink" href="zogen.html#x0y0z2">Link here</a>
      | Toggle [
        <a href="javascript:void(window.zogen.loadLinks = !window.zogen.loadLinks)">info loading</a>
      | <a href="javascript:void(window.zogen.createLinks = !window.zogen.createLinks)">info element creation</a>
      | <a href="javascript:toggleCSSDisplay('.info')">emblems</a>
      | <a href="javascript:toggleCSSDisplay('.infoText')">filename</a>
      | <a href="javascript:toggleCSSDisplay('.itemLink')">links</a> ]
    </div>
    <div id="zogen">
    </div>
  </body>

</html>
